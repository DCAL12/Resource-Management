<strong ng-show="!viewModel.organization.name">Loading...</strong>
<header ng-show="viewModel.organization.name">
	
	<h3 ng-bind="viewModel.organization.name"></h3>
	
	<!--<nav role="navigation" class="workspaceNavigation">-->
	<!--    <ul>-->
	<!--        <li><a href="timeline" title="Timeline">Timeline</a></li>-->
	<!--        <li><a href="requests" title="Requests">Requests</a></li>-->
	<!--        <li><a href="resources" title="Resources">Resources</a></li>-->
	<!--        <li><a href="organization" title="Organization Info">Organization Info</a></li>-->
	<!--    </ul>-->
	<!--</nav>	-->
</header>

<section>
	<h4>Timeline</h4>
	GUI for visually representing resources and requests on a timeline. 
</section>

<section>
	<h4>Requests</h4>
	
	<strong ng-show="!viewModel.requests">Loading...</strong>
	<strong ng-show="viewModel.requests.length === 0">There are no requests</strong>
	
	<table ng-show="viewModel.requests && viewModel.requests.length > 0">
		<tr>
			<th>Resource Type</th>
			<th>QTY</th>
			<th>Description</th>
			<th>Start</th>
			<th>End</th>
			<th>Location</th>
			<th>Requestor</th>
			<th>Submitted</th>
			<th>Status</th>
		</tr>
		<tr ng-repeat="request in viewModel.requests"
			ng-class="{even: $even, odd: $odd}">
			<td ng-bind="request._resourceType.type"></td>
			<td ng-bind="request.quantity"></td>
			<td ng-bind="request.description"></td>
			<td ng-bind="request.startTime"></td>
			<td ng-bind="request.endTime"></td>
			<td ng-bind="request.location"></td>
			<td ng-bind="request._createdBy.email"></td>
			<td ng-bind="request.createdTime"></td>
			<td>
				<select
					ng-model="request.status"
					ng-change="viewModel.requestWidget.updateRequest(request)">
					<option>pending</option> 
					<option>approved</option>
					<option>denied</option>
					<option>cancelled</option>
				</select>
			</td>
		</tr>
	</table>
	
	<ul class="action">
		<li	ng-click="viewModel
				.requestWidget
				.createRequest
				.dialog()">
			Add Request
		</li>
	</ul>
	
</section>

<section>
	
	<h4>Resources</h4>
	
	<strong ng-show="!viewModel.resourceTypes.length > 0">
		There are no resource types defined
	</strong>
	
	<ul class="action">
		<li ng-show= "viewModel.resourceTypes.length > 0">
			<select
			 	ng-options="resourceType as resourceType.type for resourceType in viewModel.resourceTypes"
				ng-model="viewModel.resourceTypes.selected"
				ng-change="viewModel.resourceWidget.selectType(viewModel.resourceTypes.selected)">
			 	<option value="">--Select a Resource Type--</option>
			</select> 	
		</li>
		
		<li
			ng-click="viewModel
				.resourceWidget
				.createResourceType
				.dialog()">
			Add Resource Type
		</li>
	
		<li ng-show= "viewModel.resourceTypes.selected"
			ng-click="viewModel
				.resourceWidget
				.addAttribute
				.dialog()">
			Add an attribute
		</li>	
	</ul>
	
	<div ng-show= "viewModel.resourceTypes.selected">
		
		<h5 ng-bind="'Available ' + viewModel.resourceTypes.selected.type + 's'"></h5>
	
		<strong ng-show="!viewModel.resources">Loading...</strong>
		<strong ng-show="viewModel.resources.length === 0"
				ng-bind="'There are no ' +  viewModel.resourceTypes.selected.type + 's defined'">
		</strong>
		
		<form 
			name="addResource" 
			method="post" 
			novalidate
			ng-submit="addResource.$valid && 
				viewModel.resourceWidget.addResource.submit()">
		
		<!--Existing Resources-->
		<table class="data">
		
		<div ng-if="viewModel.resources && viewModel.resources.length > 0">
			<tr>
				<th ng-repeat="attribute in viewModel.resources.attributes" 
					ng-bind="attribute.name"></th>
			</tr>
			
			<tr ng-repeat="resource in viewModel.resources"
				ng-class="{even: $even, odd: $odd}">
				
				<td ng-repeat="attribute in viewModel.resources.attributes"
					ng-bind="resource[attribute.name]"></td>	
			</tr>
		</div>
		
		<!--Add a new resource-->
			<tr>
				<td ng-repeat="attribute in viewModel.resources.attributes">
						<input type="{{ attribute.type }}"
								name="{{ attribute.name }}"
								placeholder="{{ attribute.name }}"
								ng-model="viewModel.resourceWidget.addResource.data[attribute.name]"
								ng-if="attribute.required"
								required>
						<input type="{{ attribute.type }}"
								name="{{ attribute.name }}"
								placeholder="{{ attribute.name }}"
								ng-model="viewModel.resourceWidget.addResource.data[attribute.name]"
								ng-if="!attribute.required">
				</td>
				
				<td><input type="submit" value="Add"></td>
				<span ng-show="viewModel.addResource.processing">
			    	Processing...
			    </span>
			    
			    <div class="status" ng-show="addResource.$submitted">
			    	<ul>
			    		<li ng-repeat="attribute in viewModel.resources.attributes | filter:attribute.required"
			    			class="error" 
			    			ng-show="addResource[attribute.name].$error.required"
			    			ng-bind="attribute.name + ' is required'">
			    		</li>
			    	</ul>
			    </div>
			    
			</tr>
		</table>	
		
		</form>
	</div>
	
</section>

<section>
	<h4>Organization Info</h4>
	<table>
		<tr>
			<td>Name</td>
			<td ng-bind="viewModel.organization.name"></td>
		</tr>
		<tr>
			<td>Description</td>
			<td ng-bind="viewModel.organization.description"></td>
		</tr>
	</table>
	<p class="action"
		ng-click="viewModel
			.organizationWidget
			.deleteOrganization
				.dialog()">
		Delete Organization
	</p>
</section>